-  Apollo 平台的无人驾驶结构

  ![](imgs/１.png)

- Apollo的技术框架四个层面：

  车辆参考系统，硬件参考系统，开源软件，云服务平台。

- 参考车辆与硬件平台

  无人驾驶需要一台“线控驾驶车辆”，“控制器区域网”（CAN），是车辆内部通信网络，计算机通过CAN卡连接汽车内部网络，发送加速，专项，制动信号。

  ![](imgs/2.jpg)

- 开源软件栈

  RTOS：实时操作系统

  Ａpollo RTOS是Ubuntu Linux系统和Apollo内核的组成的，（Ubuntu默认不是实时的操作系统） 。

  ROS运行于Ａpollo RTOS之上，是其上面的软件框架。Apollo 使用protobuf代替原来的ROS消息格式，可以使消息兼容。

  ![](imgs/3.png)

- 云服务

- 高精度地图

  1. 用于定位
  2. 用于感知，如果未检测到某个物体，（比如交通信号灯）可以使用地图继续做决策，这样的话如果传感器坏掉了，车辆依旧可以行驶，再比如寻找停车标志，可以在地图标注的区域寻找感兴趣区域（ROI）。
  3. 用于规划，确定车道的中心线，限速标志，或前方发生事故等，提前变道。

- Apollo使用的是Apollo OPEN DRIVE 地图数据的格式

  ![](imgs/4.png)

- 地图构建的过程

  ![](imgs/5.png)

- 定位

  GNSS RTK：GPS只是GNSS的一种实现，RTK基站的精确位置和误差已知，精度在10cm左右。

  ![](imgs/6.png)

- LiDAR定位：

  ICP，

  直方图滤波（Ａpollo）：把扫描得到的点在地图上滑过，计算距离误差，找到误差最小的点。

  卡尔曼滤波：

- 视觉定位：使用粒子滤波，优点：数据很容易获取，缺点：缺乏三维信息和对三维地图的依赖。

- ​

